<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#080808">
<title>Nav Test 5</title>
<style>
:root { --bg:#080808; --red:#4a0e0b; }
* { margin:0; padding:0; box-sizing:border-box; }
html { background-color:#080808; }
body { background-color:#080808; color:#aaa; font-family:-apple-system,system-ui,sans-serif;
  padding-top:calc(52px + env(safe-area-inset-top,0px));
  padding-bottom:56px; }

/* ── TOP NAV ── */
.tn {
  position:fixed; top:0; left:0; right:0; z-index:900;
  height:calc(52px + env(safe-area-inset-top,0px));
  padding-top:env(safe-area-inset-top,0px);
  display:flex; align-items:center; justify-content:space-between;
  padding-left:1.5rem; padding-right:1.5rem;
  background:transparent;
  overflow:hidden;
}
.tn-bg {
  position:absolute; top:0; left:0; right:0; bottom:0;
  background:rgba(8,8,8,.82);
  -webkit-backdrop-filter:blur(12px) saturate(160%);
  backdrop-filter:blur(12px) saturate(160%);
  border-bottom:1px solid rgba(255,255,255,.06);
  z-index:-1;
}
/* Placeholder space where logo sits inside nav — keeps alignment */
.tn-logo-space {
  width:48px; /* rough width of logo at display size */
}
.tn-r { display:flex; gap:1.25rem; }
.tn-r a { color:rgba(255,255,255,.7); text-decoration:none; font-size:.85rem; }

/* ── FLOATING LOGO ── */
/* Completely outside the nav element. Not clipped by overflow:hidden.
   Positioned so it vertically centers on the nav bar and overflows below. */
.tn-logo-float {
  position:fixed;
  /* Top = safe area, so logo top aligns with nav content area top */
  top:calc(env(safe-area-inset-top,0px) + 2px);
  left:1.5rem;
  z-index:901;
  pointer-events:none;
  transition:transform .5s cubic-bezier(.25,.1,.25,1);
}
.tn-logo-float a {
  pointer-events:auto;
  display:block;
  line-height:0;
}
.tn-logo-float img {
  height:68px; width:auto;
  filter:drop-shadow(0 2px 12px rgba(0,0,0,.7));
  display:block;
}
/* Text fallback when image fails */
.tn-logo-float .logo-txt {
  font-size:1.15rem; font-weight:800; color:#fff;
  text-decoration:none; letter-spacing:-.02em;
  line-height:52px; /* vertically center in nav height */
}
.tn-logo-float .logo-txt b { color:#c22318; }
/* Hide text when image loads */
.tn-logo-float img:not([src=""])+.logo-txt { display:none; }
.tn-logo-float img[src=""] { display:none; }

/* ── BOTTOM NAV ── */
.bn {
  position:fixed; bottom:0; left:0; right:0; z-index:900;
  height:56px;
  background:transparent;
  display:flex; justify-content:space-around; align-items:center;
}
.bn-bg {
  position:absolute; top:0; left:0; right:0; bottom:0;
  background:rgba(8,8,8,.92);
  -webkit-backdrop-filter:blur(20px) saturate(180%);
  backdrop-filter:blur(20px) saturate(180%);
  border-top:1px solid rgba(255,255,255,.06);
  z-index:-1;
  transition:background .6s ease, border-color .6s ease;
}
.bn a { color:rgba(255,255,255,.5); text-decoration:none; font-size:.7rem; text-align:center; }
.bn svg { display:block; margin:0 auto 2px; width:22px; height:22px; stroke:rgba(255,255,255,.5); fill:none; stroke-width:1.5; }

/* Glow states — use the SAME red everywhere */
.bn.glow-on .bn-bg { background:var(--red); border-top-color:rgba(217,48,37,.3); }
.bn.glow-on a { color:rgba(255,255,255,.8); }
.bn.glow-on svg { stroke:rgba(255,255,255,.8); }

/* ── FOOTER ── */
.foot {
  background-color:#080808;
  padding:1.5rem;
  text-align:center;
  color:#555;
  transition:background-color .6s ease, color .6s ease;
}
.foot.glow-on { background-color:var(--red); color:#999; }

/* ── CONTENT ── */
section { padding:3rem 1.5rem; min-height:80vh; }
section:nth-child(even) { background:#0c0c0c; }
h2 { color:#fff; margin-bottom:1rem; font-size:1.6rem; }
.color-bar { display:flex; gap:4px; margin:1.5rem 0; }
.color-bar div { height:40px; flex:1; border-radius:4px; }
</style>
</head>
<body>

<!-- Top nav -->
<nav class="tn" id="tn">
  <div class="tn-bg"></div>
  <div class="tn-logo-space"></div>
  <div class="tn-r">
    <a href="#s1">Tekijät</a>
    <a href="#s2">Palvelut</a>
    <a href="#s3">Yhteystiedot</a>
  </div>
</nav>

<!-- Floating logo — entirely outside nav, free to overflow -->
<div class="tn-logo-float" id="logoFloat">
  <a href="#">
    <img src="nhiservices.svg" alt="NHI"
         onerror="this.src='';this.style.display='none'">
    <span class="logo-txt"><b>NHI</b> Services</span>
  </a>
</div>

<section id="s1">
  <h2>Blur Test</h2>
  <p>Scroll colored bars behind nav — colors should glow, text should not be readable.</p>
  <div class="color-bar">
    <div style="background:#c22318"></div>
    <div style="background:#d4a017"></div>
    <div style="background:#fff"></div>
    <div style="background:#c22318"></div>
  </div>
  <p style="font-size:2rem;font-weight:900;color:#fff;margin:1rem 0">CAN YOU READ THIS BEHIND NAV?</p>
  <div class="color-bar">
    <div style="background:#d4a017"></div>
    <div style="background:#c22318"></div>
    <div style="background:#fff"></div>
    <div style="background:#d4a017"></div>
  </div>
  <p>Lorem ipsum dolor sit amet consectetur adipiscing elit.</p>
  <p>Lorem ipsum dolor sit amet consectetur adipiscing elit.</p>
</section>

<section id="s2">
  <h2>Section 2</h2>
  <p>More content.</p><p>Lorem ipsum.</p><p>Lorem ipsum.</p><p>Lorem ipsum.</p>
</section>

<section id="s3">
  <h2>Section 3 — Scroll to end</h2>
  <p>Footer + bottom nav turn red. Overscroll should show same red everywhere — no dark/light mismatch.</p>
  <p>Lorem ipsum.</p><p>Lorem ipsum.</p>
</section>

<footer class="foot" id="foot">© 2026 NHI Services Oy</footer>

<!-- Bottom nav -->
<nav class="bn" id="bn">
  <div class="bn-bg"></div>
  <a href="#s1"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v-2"/><circle cx="9" cy="7" r="4"/></svg>Tekijät</a>
  <a href="#s2"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>Palvelut</a>
  <a href="#s3"><svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>Yhteystiedot</a>
</nav>

<script>
// End-of-page glow — ALL reds match via --red variable
var bn=document.getElementById('bn'), ft=document.getElementById('foot');
window.addEventListener('scroll', function(){
  var sh=document.documentElement.scrollHeight;
  var atEnd=scrollY+innerHeight>sh-200;
  bn.classList.toggle('glow-on',atEnd);
  ft.classList.toggle('glow-on',atEnd);
  // html + body bg = same --red so overscroll matches footer/nav
  var col=atEnd?'#4a0e0b':'#080808';
  document.documentElement.style.backgroundColor=col;
  document.body.style.backgroundColor=col;
},{passive:true});

// Nav hide on scroll
var lastY=0,tn=document.getElementById('tn'),logo=document.getElementById('logoFloat');
window.addEventListener('scroll', function(){
  var cy=scrollY;
  if(cy>lastY&&cy>80){
    tn.style.transform='translateY(-100%)';
    logo.style.transform='translateY(calc(-100% - 40px))';
  } else {
    tn.style.transform='';
    logo.style.transform='';
  }
  lastY=cy;
},{passive:true});
</script>
</body>
</html>

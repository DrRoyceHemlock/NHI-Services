<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#080808">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Nav Test</title>
<style>
:root {
  --bg: #080808;
  --nav-h: 52px;
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
}

* { margin:0; padding:0; box-sizing:border-box; }

html {
  background-color: #080808;
}

body {
  background: var(--bg);
  color: #ccc;
  font-family: -apple-system, system-ui, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  /* Space for the nav at top */
  padding-top: calc(var(--nav-h) + var(--sat));
}

/* ==========================================
   TOP NAV — Safari 26 Liquid Glass safe
   
   The OUTER nav is position:fixed, background:transparent.
   Safari 26 samples fixed elements for chrome tinting.
   Transparent = Safari uses html bg (#080808) for tint.
   
   The INNER .nav-surface is position:absolute, carries
   all visual styles. Safari ignores absolute children.
   ========================================== */

.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 900;
  /* Total height = nav content + status bar safe area */
  height: calc(var(--nav-h) + var(--sat));
  /* Push content below status bar */
  padding-top: var(--sat);
  /* Transparent — Safari won't tint from this */
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
}

/* The visual surface — absolute, Safari ignores it */
.nav-surface {
  position: absolute;
  /* Cover the entire nav including safe area above */
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  /* Visual styling lives here */
  background: rgba(8, 8, 8, 0.92);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid rgba(255,255,255,0.06);
  /* Behind the nav content */
  z-index: -1;
}

.nav-logo {
  font-size: 1.1rem;
  font-weight: 800;
  color: #fff;
  text-decoration: none;
  position: relative;
  z-index: 1;
}

.nav-logo span { color: #c22318; }

.nav-links {
  display: flex;
  gap: 1.5rem;
  position: relative;
  z-index: 1;
}

.nav-links a {
  color: rgba(255,255,255,0.7);
  text-decoration: none;
  font-size: 0.85rem;
  font-weight: 500;
}

/* Test content */
section {
  padding: 4rem 1.5rem;
  min-height: 100vh;
}

section:nth-child(odd) { background: #0a0a0a; }
section:nth-child(even) { background: #080808; }

h2 { color: #fff; font-size: 1.8rem; margin-bottom: 1rem; }

.debug-info {
  position: fixed;
  bottom: 20px;
  left: 20px;
  right: 20px;
  background: rgba(0,0,0,0.8);
  color: #0f0;
  font-family: monospace;
  font-size: 12px;
  padding: 10px;
  border-radius: 8px;
  z-index: 999;
}
</style>
</head>
<body>

<!-- NAV: fixed parent is transparent, absolute child has visuals -->
<nav class="top-nav">
  <div class="nav-surface" aria-hidden="true"></div>
  <a href="#" class="nav-logo"><span>NHI</span> Services</a>
  <div class="nav-links">
    <a href="#s1">Tiimi</a>
    <a href="#s2">Palvelut</a>
    <a href="#s3">Prosessi</a>
  </div>
</nav>

<section id="s1">
  <h2>Section 1 — Tiimi</h2>
  <p>This text should NOT be visible above the nav bar. If you can see content behind the status bar / Dynamic Island area, the nav isn't covering it properly.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
  <p>More content to enable scrolling...</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
</section>

<section id="s2">
  <h2>Section 2 — Palvelut</h2>
  <p>Scrolling should show the nav covering everything above it, including the status bar zone. No content should bleed through.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
</section>

<section id="s3">
  <h2>Section 3 — Prosessi</h2>
  <p>If this works, we port the exact same nav structure to the main site.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
</section>

<section>
  <h2>Section 4 — Extra scroll</h2>
  <p>More content...</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</section>

<div class="debug-info" id="dbg"></div>

<script>
// Show debug info about safe area values
function updateDebug() {
  var el = document.getElementById('dbg');
  var cs = getComputedStyle(document.documentElement);
  var nav = document.querySelector('.top-nav');
  var navRect = nav.getBoundingClientRect();
  el.innerHTML = 
    'safe-area-inset-top: ' + cs.getPropertyValue('--sat') + '<br>' +
    'nav height (computed): ' + navRect.height + 'px<br>' +
    'nav top: ' + navRect.top + 'px<br>' +
    'nav bottom edge: ' + navRect.bottom + 'px<br>' +
    'window.innerHeight: ' + window.innerHeight + '<br>' +
    'scrollY: ' + Math.round(window.scrollY);
}
updateDebug();
window.addEventListener('scroll', updateDebug, {passive:true});
window.addEventListener('resize', updateDebug);
</script>
</body>
</html>
